# 🚀 AI PM Evaluation System - Workflow Dashboard

## 📊 工作流程可视化监控系统

这是一个实时监控AI评估工作流程执行的可视化界面，让你可以清楚地看到整个工作流程的每个步骤和输出。

## 🏗️ 系统架构

```
backend/
├── app.py                      # 主应用 (端口 8080)
├── workflow_dashboard.py       # 监控面板 (端口 5001)
├── prompt_manager.py          # 提示词管理模块
├── prompts/                   # 提示词文件目录
│   └── capability_dimensions_prompt.txt
├── templates/                 # HTML模板
│   └── dashboard.html
├── start_system.py           # 启动脚本
└── test_workflow_monitoring.py # 测试脚本
```

## 🚀 快速开始

### 1. 启动整个系统
```bash
cd backend
python start_system.py
```

这将同时启动：
- **主应用**: http://localhost:8080
- **监控面板**: http://localhost:5001

### 2. 单独启动监控面板
```bash
cd backend
python workflow_dashboard.py
```

### 3. 测试监控系统
```bash
cd backend
python test_workflow_monitoring.py
```

## 📱 界面功能

### 🎯 主要特性
- **实时监控**: 自动刷新，实时显示工作流程状态
- **执行历史**: 查看所有历史执行记录
- **步骤详情**: 每个执行步骤的详细信息
- **错误追踪**: 完整的错误信息和堆栈跟踪
- **性能统计**: 执行时间、步骤数量等统计信息

### 📊 监控指标
- **总执行次数**: 系统运行以来的总执行数
- **正在运行**: 当前正在执行的流程数量
- **已完成**: 成功完成的执行数量
- **失败次数**: 执行失败的次数

### 🔍 执行详情
每个执行记录包含：
- **执行ID**: 唯一标识符
- **状态**: Running/Completed/Failed
- **时间信息**: 开始时间、结束时间、执行时长
- **输入数据**: 用户输入的产品信息和理想功能
- **执行步骤**: 详细的步骤列表和中间数据
- **输出结果**: 最终生成的能力维度
- **错误信息**: 如果失败，显示错误详情

## 🛠️ API接口

### 获取执行历史
```http
GET /api/executions
```

### 获取特定执行详情
```http
GET /api/execution/{execution_id}
```

### 获取当前执行
```http
GET /api/current
```

### 手动控制 (测试用)
```http
POST /api/start
POST /api/step
POST /api/complete
```

## 🎨 界面设计

### 视觉特性
- **现代化设计**: 使用渐变背景和卡片布局
- **响应式布局**: 适配不同屏幕尺寸
- **状态指示**: 清晰的颜色编码状态显示
- **动画效果**: 悬停和加载动画
- **实时更新**: 自动刷新，无需手动刷新

### 颜色编码
- 🟡 **Running**: 黄色 - 正在执行
- 🟢 **Completed**: 绿色 - 成功完成
- 🔴 **Failed**: 红色 - 执行失败

## 🔧 技术实现

### 后端技术
- **Flask**: Web框架
- **Threading**: 多线程支持
- **JSON**: 数据交换格式
- **CORS**: 跨域支持

### 前端技术
- **HTML5**: 语义化标记
- **CSS3**: 现代样式和动画
- **JavaScript**: 实时数据更新
- **Fetch API**: 异步数据请求

### 监控机制
- **执行追踪**: 每个工作流程的完整生命周期
- **步骤记录**: 详细的步骤信息和中间数据
- **错误捕获**: 完整的错误信息和上下文
- **性能监控**: 执行时间和资源使用情况

## 📈 使用场景

### 1. 开发调试
- 监控AI模型调用过程
- 查看提示词和响应内容
- 调试JSON解析问题
- 分析执行性能

### 2. 生产监控
- 实时监控系统健康状态
- 追踪用户请求处理
- 识别性能瓶颈
- 监控错误率

### 3. 数据分析
- 分析工作流程执行模式
- 统计成功率和失败原因
- 优化提示词和参数
- 性能优化建议

## 🚨 故障排除

### 常见问题

1. **无法访问监控面板**
   - 检查端口5001是否被占用
   - 确认防火墙设置
   - 检查Flask应用是否正常启动

2. **数据不更新**
   - 检查浏览器控制台错误
   - 确认API接口正常响应
   - 检查网络连接

3. **执行记录丢失**
   - 重启应用会清空内存中的记录
   - 考虑添加持久化存储

### 调试模式
```bash
# 启用Flask调试模式
export FLASK_DEBUG=1
python workflow_dashboard.py
```

## 🔮 未来扩展

### 计划功能
- **持久化存储**: 使用数据库存储执行历史
- **用户认证**: 添加登录和权限管理
- **数据导出**: 支持CSV/JSON格式导出
- **告警系统**: 失败率过高时发送通知
- **性能分析**: 更详细的性能指标和图表
- **多环境支持**: 支持开发/测试/生产环境

### 集成选项
- **Prometheus**: 指标收集和监控
- **Grafana**: 高级数据可视化
- **ELK Stack**: 日志分析和搜索
- **Slack/Teams**: 告警通知集成

## 📞 支持

如有问题或建议，请：
1. 查看控制台错误信息
2. 检查API接口响应
3. 运行测试脚本验证功能
4. 查看系统日志

---

**🎉 享受实时监控你的AI工作流程！**
